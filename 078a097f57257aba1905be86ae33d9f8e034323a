---
type: learnings
timestamp: '2025-12-25T16:02:17.848895+00:00'
summary: '...complex parallel work'
tags:
- auto-captured
- post-tool-use
- file:context-pr-body.md
---

...complex parallel work
- [ ] Manual test: Verify checkpointing occurs at specified triggers

## Key Insight

The core fix establishes **context budget awareness**: parallel execution is beneficial but...

---
type: learnings
timestamp: '2025-12-25T16:02:51.768681+00:00'
summary: API error 400 with "unexpected tool_use_id" indicates conversation state
  corruption
---

API error 400 with "unexpected tool_use_id" indicates conversation state corruption
## Summary
Tool result blocks must reference tool_use blocks from the immediately preceding message. When this invariant is violated, the API rejects the request.

## Common Causes
- Interrupted responses during tool calls
- Context compaction mishandling tool call pairs
- Session resume with incomplete state

## Related Files
- commands/implement.md:1-1502 (command being invoked)

---
type: learnings
timestamp: '2025-12-25T16:06:31.532409+00:00'
summary: '▶ learned ─────────────────────────────────────

  API error 400 with "unexpected tool_use_id" indic...'
tags:
- auto-captured
- pre-compact
---

API error 400 with "unexpected tool_use_id" indicates conversation state corruption
## Summary
Tool result blocks must reference tool_use blocks from the immediately preceding message. When this invariant is violated, the API rejects the request.

## Common Causes
- Interrupted responses during tool calls
- Context compaction mishandling tool call pairs
- Session resume with incomplete state

## Related Files
- commands/implement.md:1-1502 (command being invoked)
