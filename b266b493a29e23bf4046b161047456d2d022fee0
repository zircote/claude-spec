---
type: learnings
timestamp: '2025-12-25T16:45:18.178954+00:00'
summary: API error 400 with "unexpected tool_use_id" indicates conversation state
  corruption
---

API error 400 with "unexpected tool_use_id" indicates conversation state corruption
## Summary
Tool result blocks must reference tool_use blocks from the immediately preceding message. When this invariant is violated, the API rejects the request.

## Common Causes
- Interrupted responses during tool calls
- Context compaction mishandling tool call pairs
- Session resume with incomplete state

## Related Files
- commands/implement.md:1-1502 (command being invoked)

---
type: learnings
timestamp: '2025-12-25T17:16:10.033818+00:00'
summary: '...README.md.'
tags:
- auto-captured
- post-tool-use
- file:DECISIONS.md
---

...README.md.

### Consequences

**Positive:**
- Clean separation from active work
- Preserves work for future reference
- Clear audit trail

**Negative:**
- Creates additional directory to maintain
- Rejected specs...

---
type: learnings
timestamp: '2025-12-25T17:17:14.932179+00:00'
summary: Jumped directly to implementation instead of following planning workflow
---

Jumped directly to implementation instead of following planning workflow
## Summary
When `/claude-spec:plan` is invoked with an issue reference, the correct behavior is to follow the full planning protocol (elicitation → research → spec documents), NOT to immediately start implementing the issue's solution.

## Lesson
The `/plan` command produces planning artifacts (REQUIREMENTS.md, ARCHITECTURE.md, IMPLEMENTATION_PLAN.md). Implementation only happens after `/approve` and `/implement` commands. This is the entire point of the issue #26 - to create explicit gates between phases.

## Related Files
- commands/plan.md:1-200 (planning protocol)

---
type: learnings
timestamp: '2025-12-25T17:18:10.055834+00:00'
summary: Jumped directly to implementation instead of following planning workflow
---

Jumped directly to implementation instead of following planning workflow
## Summary
When `/claude-spec:plan` is invoked with an issue reference, the correct behavior is to follow the full planning protocol (elicitation → research → spec documents), NOT to immediately start implementing the issue's solution.

## Lesson
The `/plan` command produces planning artifacts (REQUIREMENTS.md, ARCHITECTURE.md, IMPLEMENTATION_PLAN.md). Implementation only happens after `/approve` and `/implement` commands. This is the entire point of the issue #26 - to create explicit gates between phases.

## Related Files
- commands/plan.md:1-200 (planning protocol)

---
type: learnings
timestamp: '2025-12-25T17:21:25.441138+00:00'
summary: '▶ learned ─────────────────────────────────────

  Jumped directly to implementation instead of foll...'
tags:
- auto-captured
- pre-compact
---

Jumped directly to implementation instead of following planning workflow
## Summary
When `/claude-spec:plan` is invoked with an issue reference, the correct behavior is to follow the full planning protocol (elicitation → research → spec documents), NOT to immediately start implementing the issue's solution.

## Lesson
The `/plan` command produces planning artifacts (REQUIREMENTS.md, ARCHITECTURE.md, IMPLEMENTATION_PLAN.md). Implementation only happens after `/approve` and `/implement` commands. This is the entire point of the issue #26 - to create explicit gates between phases.

## Related Files
- commands/plan.md:1-200 (planning protocol)

---
type: learnings
timestamp: '2025-12-25T17:32:55.667881+00:00'
summary: Jumped directly to implementation instead of following planning workflow
---

Jumped directly to implementation instead of following planning workflow
## Summary
When `/claude-spec:plan` is invoked with an issue reference, the correct behavior is to follow the full planning protocol (elicitation → research → spec documents), NOT to immediately start implementing the issue's solution.

## Lesson
The `/plan` command produces planning artifacts (REQUIREMENTS.md, ARCHITECTURE.md, IMPLEMENTATION_PLAN.md). Implementation only happens after `/approve` and `/implement` commands. This is the entire point of the issue #26 - to create explicit gates between phases.

## Related Files
- commands/plan.md:1-200 (planning protocol)

---
type: learnings
timestamp: '2025-12-25T17:36:24.710028+00:00'
summary: Jumped directly to implementation instead of following planning workflow
---

Jumped directly to implementation instead of following planning workflow
## Summary
When `/claude-spec:plan` is invoked with an issue reference, the correct behavior is to follow the full planning protocol (elicitation → research → spec documents), NOT to immediately start implementing the issue's solution.

## Lesson
The `/plan` command produces planning artifacts (REQUIREMENTS.md, ARCHITECTURE.md, IMPLEMENTATION_PLAN.md). Implementation only happens after `/approve` and `/implement` commands. This is the entire point of the issue #26 - to create explicit gates between phases.

## Related Files
- commands/plan.md:1-200 (planning protocol)
